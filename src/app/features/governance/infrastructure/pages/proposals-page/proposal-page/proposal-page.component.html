<div class="container-page" *ngIf="proposal">
  <div class="row">
    <div class="col-12 col-md-8 mb-3 border-end">
      <div>
        <a [routerLink]="'../'" [routerLinkActive]="'active'" class="text-decoration-none">
          <i class="fa-solid fa-arrow-left me-1"></i> Tornar a propostes
        </a>
        <h3 class="fw-bold mt-3 text-tertiary">Proposta</h3>
      </div>

      <div>
        <h5 class="fw-bold">{{ proposal.proposal }}</h5>
        <p>{{ proposal.description }}</p>

        <small class="text-body-secondary">Feta per: {{ proposal.firstname }}</small>

        <br>
        <div class="mt-5">
          <button class="btn me-4 bg-white" [ngClass]="getStatusButtonClass(proposal.status)">
            {{ statusTranslation(proposal.status) }}
          </button>
          <button class="btn btn-outline-tertiary bg-white">
            {{typeTranslation(proposal.type)}}
          </button>
        </div>

      </div>
    </div>

    <div class="col-12 col-md-4 px-5">
      <div>
        <h5 class="fw-bold">Informació</h5>

        <p *ngIf="totalVotes"><strong>Vots:</strong> Han votat {{totalVotes}} membres de {{totalMembers}}</p>
        <p><strong>Data de finalització:</strong> {{proposal.expirationDt | date: 'yy-MM-dd hh:mm'}}</p>
      </div>


      <div class="mt-5">
        <h5 class="fw-bold">Vota aquí</h5>

        <div *ngFor="let option of proposal.options!; let i = index" class="d-flex my-2">
          <button class="btn btn-outline-secondary px-3 py-1 rounded-5 w-100 text-start" [ngClass]="activeOptionIndex == i ? 'active-tertiary' : ''"
                  (click)="selectOption(option.id!, i)" [disabled]="alreadyVoted">
            {{ option.option }}
          </button>
        </div>
      </div>
      <div class="mt-5" *ngIf="proposal.transparent != 0">
        <h5 class="fw-bold">Resultat votacions fins ara</h5>

        <div *ngFor="let option of proposal.options!" class="my-3">
          <label class="form-label">
            {{ option.option }}
          </label>
          <i class="fa-regular-calendar">
            <div class="progress" role="progressbar" aria-valuenow="25"
                 aria-valuemin="0"
                 aria-valuemax="100">
              <div class="progress-bar bg-tertiary" [style.width.%]="option.percentage || 0">{{option.percentage || 0}}%</div>
            </div>
          </i>
        </div>

      </div>
    </div>
  </div>
</div>
